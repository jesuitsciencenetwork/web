{% extends "layout.html.twig" %}
{% import "macros.html.twig" as macro %}


{% set enableMap = true %}

{% block content %}

    <div class="container">

        <div class="row">

            <div class="col-md-2">
                <h6>Refine your search</h6>

                        <h6>Subjects</h6>

                        <h6>Continents</h6>

                        <h6>Countries</h6>
            </div>

            <div class="col-md-10 search-results" style="border-left: 1px solid #ddd;">

                <h3>Search Results</h3>

                {#<div class="text-right" style="margin-top: 20px;">#}
                    {#<button type="button" class="btn-sm btn-default btn" style="font-family: Montserrat; font-weight: bold; letter-spacing: 0.5px; text-transform:uppercase;">Show map {{ icon('expand')}}</button>#}
                {#</div>#}
                {#<div class="panel panel-default" style="margin-top: 20px;position:relative;">#}
                    {#<div id="map" style="width: 100%; height: 300px;"></div>#}
                    {#<button type="button" class="pull-right btn-xs btn-default btn" style="position:absolute; top: 5px; right: 5px;border: 0 none; background-color: transparent;">{{ icon('compress')}}</button>#}
                {#</div>#}

                <p>{{ pagination.getTotalItemCount }} results</p>

                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Person</th>
                            <th>Date</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for aspect in pagination %}
                        <tr>
                            <td>
                                <a href="{{ path('detail', {id:aspect.person.id}) }}">{{ aspect.person.listName }}</a>
                            </td>
                            <td style="white-space: nowrap;">
                                {% if aspect.dateExact %}
                                    {{ aspect.dateExact }}
                                {% elseif aspect.dateFrom or aspect.dateTo %}
                                    {{ aspect.dateFrom }} â€“ {{ aspect.dateTo }}
                                {% endif %}
                            </td>
                            <td>
                                {% if "entryInTheOrder" == aspect.type %}
                                    Entered the Society of Jesus {{ macro.places(aspect) }}
                                {% elseif "beginningOfLife" == aspect.type %}
                                    Born {{ macro.places(aspect) }}
                                {% elseif "endOfLife" == aspect.type %}
                                    Died {{ macro.places(aspect) }}
                                {% elseif "resignationFromTheOrder" == aspect.type %}
                                    Left the Society {{ macro.places(aspect) }}
                                {% elseif "expulsionFromTheOrder" == aspect.type %}
                                    Was expelled from the Society {{ macro.places(aspect) }}
                                {% elseif "education" == aspect.type %}
                                    Studied {{ macro.subjects(aspect) }}{{ macro.places(aspect) }}
                                    {{ macro.comment(aspect) }}
                                {% elseif "career" == aspect.type %}
                                    {% if not aspect.occupation %}
                                        Occupied himself with {{ macro.subjects(aspect) }}{{ macro.places(aspect) }}
                                    {% elseif "Teacher" == aspect.occupation %}
                                        Taught {{ macro.subjects(aspect) }}{{ macro.places(aspect) }}
                                    {% else %}
                                        {{ aspect.occupation }}{{ macro.places(aspect) }}
                                    {% endif %}
                                {% else %}
                                    {{ aspect.description|replace_links(currentPo is defined ? [currentPo] : [])|smart_quotes }}
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <div class="text-center">
                    {{ knp_pagination_render(pagination) }}
                </div>


            </div>

        </div>

    </div>

{% endblock %}
